/*
  https://twitter.com/home
  https://twitter.com/welcome2bishu
  private: https://twitter.com/Mrtnzjrmh
  tweet: https://twitter.com/theMAHsterr/status/1246987686981906435
*/
{
  "global": {
    // Indicators
    "isOnPage": {
      "url": "/twitter\\.com/",
    },
    "isOnMainSite": {
      "selector": "",
    },
    "isLoggedOut": {
      "selector": "a[href='/login']",
      /* "object": { "selector": "button", "filters": [ {"match": { "innerText": "/Log In/i" }} ] }, */
    },
    "profilePicture": {
      /* "object": { "selector": "a[aria-label='Profile']", "retrieve": ["href"] }, */
      "selector": "a[aria-label='Profile']",
    },
    "isPopupOpen": {
      "selector": "div[role='presentation']"
    },
    "popupCloseButton": {
      "selector": "div[role='presentation'] div[aria-label='Close']"
    },
    // Actions
    "searchBar": {
      "selector": "input[placeholder*='Search Twitter']",
    },
    "exploreLink": {
      "selector": "a[href='/explore']"
    },
    /* "searchBar_dropdown": {
      "selector": "div[role='dialog']",
    },
    "notificationsReminder_disable": {
      "object": { "selector": "button", "filters": [ {"match": { "innerText": "/Not Now/i" }} ] },
    }, */
    /* "viewEngagementPopup_profileLink": {
      "selector(array)": "div[role='presentation'] img",
    }, */
    // Explore
    "postLink": {
      "selector(array)": "a time",
    },
  },
  "home": {
    // Indicators
    "isOnPage": {
      "url": "/twitter.com\\/home($|\\/$|\\?|\\/\\?|\\#|\\/\\#)/",
    },
    // Actions
    /* "continueAsButton": {
      "object": { "selector": "button", "filters": [ {"match": { "innerText": "/Continue as/i" }} ] },
    }, */
  },
  "explore": {
    // Indicators
    "isOnPage": {
      "url": "/twitter\\.com\\/explore/",
    },
    // Actions

  },
  "search": {
    // Indicators
    "isOnPage": {
      "url": "/twitter\\.com\\/search/",
    },
    // Actions
    "topButton": {
      "object": {"selector": "main div[role='presentation'] a", "filters": [ {"match": { "innerText": "/Top/i" }} ] },
    },
    "latestButton": {
      "object": {"selector": "main div[role='presentation'] a", "filters": [ {"match": { "innerText": "/Latest/i" }} ] },
    },

  },
  "profile": {
    // Indicators
    // Good for testing loaded
    "isOnPage": {
      "selector": "a[href*='/header_photo']",
    },
    // example https://twitter.com/thikc
    "isPrivate": {
      "selector": "a[href*='/header_photo'] ~ div svg[aria-label='Protected account']",
    },
    // Actions
    "followButton": {
      "object": {"selector": "a[href*='/header_photo'] ~ div div[role='button']", "filters": [ {"match": { "innerText": "/Follow$|Follow back$/i" }} ], "index": 0 },
    },
    // Stats
    "followerCount": {
      "selector": "a[href*='/followers']",
    },
    "followingCount": {
      "selector": "a[href*='/following']",
    },
    "postCount": {
      "object": {"selector": "main div[dir='auto']", "filters": [ {"match": { "innerText": "/[0-9] Tweets$/" }} ], "index": 0 },
    },
    // Explore
    "viewFollowersButton": {
      "selector": "$get(profile.followerCount.selector)",
    },
    "viewFollowingButton": {
      "selector": "$get(profile.followingCount.selector)",
    },

  },
  "profile_followers": {
    // Indicators
    "isOnPage": {
      "url": "/\\/followers/",
    },
    "isEmpty": {
      "selector": "",
    },
    // Explore
    "profileLink": { // Good for testing loaded
      "selector(array)": "main img[src*='/profile_images/']",
    },
  },
  "profile_following": {
    // Indicators
    "isOnPage": {
      "url": "/\\/following/",
    },
    "isEmpty": {
      "selector": "",
    },
    // Explore
    "profileLink": {
      "selector(array)": "$get(profile_followers.profileLink.selector(array))",
    },
  },
  "post": {
    // Indicators
    "isOnPage": {
      "url": "/twitter.com\\/.*\\/status\\//",
    },
    /* "isVideoPost": {
      "selector": "article video",
    }, */
    "isLiked": {
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Liked']",
    },
    "isReposted": {
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Retweeted']"
    },
    // Actions
    "shareButton": { // Good load test
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Share Tweet']",
    },
    "likeButton": {
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Like']"
    },
    "repostButton": {
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Retweet']"
    },
    "repostButton_confirmButton": {
      "selector": "div[role='menu'] div[data-testid*='retweet']"
    },
    "commentButton": {
      "selector": "div.css-1dbjc4n.r-18u37iz.r-1h0z5md.r-3qxfft.r-h4g966.r-rjfia div[aria-label='Reply']"
    },
    "commentButton_confirmButton": {
      "object": {"selector": "div[aria-modal='true'] div[role='button']", "filters": [ {"match": { "innerText": "/Reply$/i" }} ] },
    },

    "commentList": {
      "selector": "article"
    },

    // Stats
    "likeCount": {
      "selector": "article a[href*='/likes']"
    },
    "repostCount": {
      "selector": "article a[href*='/retweets']"
    },
    "postDate": {
      "selector": ""
      /* "object": {"selector": "a[href*='/p/'] time", "retrieve": ["datetime"], "index": "$last" }, */
    },

    // Explore
    "commentProfileLink": {
      /* "object": {"selector": "article img[src*='/profile_images/']", "filters": [{"splice": [1,'$last']}], "index": "$random"} */
      "selector": "article img[src*='/profile_images/']"
    },
    "viewLikesButton": {
      "selector": "$get(post.likeCount.selector)",
    },

  },
  "post_likes": {
    "isOnPage": {
      "selector": "div[aria-label*='Timeline: Liked by'] img",
    },
    "profileLink": {
      "selector(array)": "div[aria-label*='Timeline: Liked by'] img[src*='/profile_images/']",
    },
  },
  "post_photo": {
    "isOnPage": {
      "url": "/twitter.com\\/.*\\/photo\\//",
    },
  },
  "error": {
    // Indicators
    "spamWarning": {
      "selector": ".spamWarning",
    },
    "timeout": {
      "object": {"selector": "body", "filters": [ {"match": { "innerText": "/wait a few minutes/i" }} ] },
    }
  }


}
